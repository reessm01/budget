{% load crispy_forms_tags %}
{% load static %}
{% load get_obj_attr %}
{% load zip_lists %}
{% load no_snake %}
{% load humanize %}
{% block content %}
    <div class="container-fluid shadowed">
        {% for entry, f in entries|zip_lists:forms %}
        <div class="row bg-white" id="form-{{forloop.counter}}">
            <div class="col-5 col-md-12">
                {% if forloop.counter == 1 %}
                {% include "getting-started/table-header.html" %}
                {% else %}
                {% include "getting-started/table-responsive-header.html"%}
                {% endif %}
            </div>
            <div class="col-7 col-md-12">
                {% include "getting-started/table-edit-entry.html" %}
            </div>
        </div>
        <div class="row bg-dark border d-md-none" style="height: 0.5rem;"></div>
        {% endfor %}
        <div class="row border">
            <div class="col-5 col-md-12">
                {% include "getting-started/table-responsive-header.html" %}
            </div>
            <div class="col-7 col-md-12">
                {% include "getting-started/table-new-entry.html" %}
            </div>
        </div>
    </div>
<style>
    .wrench {
        font-size: 1.5rem;
    }

    .cell-height {
        height: 3.5rem !important;
    }

    .spacer {
        height: 0.75rem;
    }

    .lh-0 {
        line-height: 0;
    }

    input,
    select {
        height: 100% !important;
        text-align: center;
        text-align-last: center;
        -moz-text-align-last: center;
        border-radius: 0rem !important;
    }

    input:hover, select:hover {
        background-color: #e3e3e6;
        cursor: pointer;
    }

    .edit-row {
        padding-top: 0px !important;
        padding-bottom: 0px !important;
    }
</style>
<script>
    function initDelete(n) {
        $(`#alerts-container-${n}`).removeClass('d-none');
        $(`#delete-warning-alert-${n}`).removeClass('d-none');
    }

    function deleteRequest(n) {
        const end_point = getEndPoint();
        const url = `/gettingstarted/${end_point}/${n}`
        const header = {
            "method": 'DELETE',
            "credentials": 'include',
            "headers": {
                "X-CSRFToken": getCookie("csrftoken"),
                "Accept": "application/json",
                "Content-Type": "application/json",
            }
        };
        $(`#delete-warning-alert-${n}`).addClass('d-none');
        $(`#fetch-alert-${n}`).removeClass('d-none');
        fetch(url, header)
            .then(res => res.json())
            .then(data => {
                location.reload()
            })
            .catch(error => {
                $(`#fetch-alert-${n}`).addClass('d-none');
                $(`#failed-alert-${n}`).removeClass('d-none');
                console.log(error)
            })
    }

    function confirmDelete(n) {
        deleteRequest(n);
    }
</script>
{% endblock %}